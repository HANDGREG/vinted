<MessageBubble@MDBoxLayout>:
    orientation: "horizontal"
    size_hint_y: None
    height: self.minimum_height
    padding: [10, 5, 10, 5]
    # Utilise 'is_sender' pour aligner à droite ou à gauche
    MDLabel:
        text: root.text
        halign: "right" if root.is_sender else "left"
        theme_text_color: "Custom"
        text_color: (1, 1, 1, 1) if root.is_sender else (0, 0, 0, 1)
        md_bg_color: (0.2, 0.6, 1, 1) if root.is_sender else (0.9, 0.9, 0.9, 1)
        padding: [12, 8]
        radius: [16, 16, 2, 16] if root.is_sender else [16, 16, 16, 2]
        size_hint_x: None
        width: min(self.texture_size[0] + 24, root.width * 0.7)